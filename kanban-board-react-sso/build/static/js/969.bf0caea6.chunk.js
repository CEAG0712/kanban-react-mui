"use strict";(self.webpackChunkkanban_board_react=self.webpackChunkkanban_board_react||[]).push([[969],{9954:(e,a,s)=>{s.d(a,{A:()=>d});s(5043);var t=s(2698),r=s(8446),l=s(5865),n=s(3216),i=s(6772),o=s(579);const d=()=>{const e=(0,n.zy)(),a=(0,n.Zp)(),s=e.pathname.split("/").filter(Boolean),d=e=>e.split(/[-_]/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),c=s.reduce(((e,a,t)=>{if((e=>/\d/.test(e)||e.length>20)(a))return e;const r=`/${s.slice(0,t+1).join("/")}`;return e.push({label:d(a),path:r}),e}),[]);return(0,o.jsxs)(t.A,{separator:(0,o.jsx)(i.A,{sx:{fontSize:18}}),"aria-label":"breadcrumb",sx:{mb:3},children:[(0,o.jsx)(r.A,{color:"inherit",onClick:()=>a("/"),sx:{cursor:"pointer",display:"flex",alignItems:"center","&:hover":{textDecoration:"none",color:"primary.main"}},children:"Dashboard"}),c.map(((e,s)=>s===c.length-1?(0,o.jsx)(l.A,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:e.label},e.path):(0,o.jsx)(r.A,{color:"inherit",onClick:()=>a(e.path),sx:{cursor:"pointer",display:"flex",alignItems:"center","&:hover":{textDecoration:"none",color:"primary.main"}},children:e.label},e.path)))]})}},5734:(e,a,s)=>{s.d(a,{A:()=>n});s(5043);var t=s(1906),r=s(6240),l=s(579);const n=e=>{let{label:a,onClick:s,startIcon:n,variant:i="contained",color:o="primary",sx:d,...c}=e;const x=(0,r.A)();return(0,l.jsx)(t.A,{variant:i,startIcon:n||null,onClick:s,sx:{mt:2,mb:4,width:"170px",fontSize:"12px",color:"contained"===i?"white":x.palette[o].main,backgroundColor:"contained"===i?x.palette[o].main:"transparent",borderColor:"outlined"===i?x.palette[o].main:"transparent","&:hover":{backgroundColor:"contained"===i?x.palette[o].dark:"transparent",borderColor:"outlined"===i?x.palette[o].dark:"transparent"},...d},...c,children:a})}},1969:(e,a,s)=>{s.r(a),s.d(a,{default:()=>q});var t=s(5043),r=s(4322),l=s(3216),n=s(7353),i=s(5865),o=s(5795),d=s(2110),c=s(6494),x=s(7392),u=s(3193),h=s(9190),p=s(9362),m=s(7970),b=s(3321),j=s(35),A=s(6600),v=s(5316),g=s(9347),k=s(9435),f=s(7332),y=s(8558),C=s(5734),S=s(1282),w=s(2237);const I=e=>w.A.get(`/tasks/${e}`),D=(e,a)=>w.A.put(`/tasks/bulk-update/${a}`,e),T=(e,a)=>w.A.post(`/tasks/${a}`,e),_=(e,a,s)=>w.A.delete(`/tasks/${s}/${e}/${a}`),P=(e,a,s,t)=>w.A.put(`/tasks/${t}/${e}/${a}`,s);var W=s(1551),U=s(579);const $={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:400},bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4},z=e=>{let{open:a,onClose:s,title:t,children:r,maxWidth:l,...o}=e;return(0,U.jsx)(W.A,{open:a,onClose:s,"aria-labelledby":"modal-title",...o,children:(0,U.jsxs)(n.A,{sx:{...$,width:l||$.width},children:[t&&(0,U.jsx)(i.A,{id:"modal-title",variant:"h6",component:"h2",sx:{mb:3},children:t}),r]})})};var R=s(9954);const q=function(){var e,a,s,w,W,$,q,B,O;const E=(0,l.g)(),N=(0,l.Zp)(),[G,H]=(0,t.useState)({}),[Y,Z]=(0,t.useState)({_id:"",taskSummary:"",acceptanceCriteria:"",status:""}),[J,L]=(0,t.useState)(!1),[V,F]=(0,t.useState)(""),[K,M]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(!1),[ee,ae]=(0,t.useState)(!1),[se,te]=(0,t.useState)(!1),[re,le]=(0,t.useState)(null),[ne,ie]=(0,t.useState)(null),[oe,de]=(0,t.useState)(""),[ce,xe]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{const e=await I(E.id),a=e.data.data.board;delete a._id,delete a.userId,delete a.__v,H(a),xe(e.data.data.projectInfo)}catch(V){console.log(V)}})()}),[K,E.id]);const ue=e=>{Z({...Y,[e.target.name]:e.target.value})},he=()=>{ie(null),le(null)},pe=()=>{X(!1),Z({_id:"",taskSummary:"",acceptanceCriteria:"",status:""})},me=()=>{ae(!1),Z({_id:"",taskSummary:"",acceptanceCriteria:"",status:""})};return(0,U.jsxs)(n.A,{sx:{padding:"37px"},children:[(0,U.jsx)(R.A,{}),(0,U.jsx)(n.A,{sx:{backgroundColor:"white",p:3,borderRadius:2,boxShadow:"0 2px 4px rgba(0,0,0,0.05)",mb:3},children:(0,U.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",gap:2},children:[(0,U.jsxs)(n.A,{children:[(0,U.jsx)(i.A,{variant:"h4",sx:{fontWeight:600,color:"text.primary",mb:.5},children:ce.projectName}),(0,U.jsx)(i.A,{variant:"subtitle1",color:"text.secondary",children:ce.projectDescription})]}),(0,U.jsxs)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[(0,U.jsxs)(n.A,{children:[(0,U.jsx)(i.A,{variant:"h6",color:"primary",children:null!==(e=null===G||void 0===G||null===(a=G.todo)||void 0===a||null===(s=a.tasks)||void 0===s?void 0:s.length)&&void 0!==e?e:0}),(0,U.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"To Do"})]}),(0,U.jsxs)(n.A,{children:[(0,U.jsx)(i.A,{variant:"h6",color:"warning.main",children:null!==(w=null===G||void 0===G||null===(W=G.inProgress)||void 0===W||null===($=W.tasks)||void 0===$?void 0:$.length)&&void 0!==w?w:0}),(0,U.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"In Progress"})]}),(0,U.jsxs)(n.A,{children:[(0,U.jsx)(i.A,{variant:"h6",color:"success.main",children:null!==(q=null===G||void 0===G||null===(B=G.done)||void 0===B||null===(O=B.tasks)||void 0===O?void 0:O.length)&&void 0!==q?q:0}),(0,U.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Completed"})]}),(0,U.jsxs)(n.A,{children:[(0,U.jsx)(i.A,{variant:"h6",children:Object.values(G).reduce(((e,a)=>e+a.tasks.length),0)}),(0,U.jsx)(i.A,{variant:"body2",color:"text.secondary",children:"Total Tasks"})]})]})]})}),(0,U.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,U.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",width:{xs:"100%",sm:"auto"}},children:[(0,U.jsx)(o.A,{variant:"outlined",placeholder:"Search tasks...",value:oe,onChange:e=>de(e.target.value),sx:{mr:{sm:2},mb:{xs:2,sm:0},width:{xs:"100%",sm:"auto"}}}),(0,U.jsx)(C.A,{label:"Create Task",onClick:()=>X(!0),startIcon:(0,U.jsx)(k.A,{}),sx:{width:{xs:"100%",sm:"auto"},mb:{xs:2,sm:0}}})]}),(0,U.jsx)(C.A,{label:"Go Back",onClick:()=>N("/projects"),startIcon:(0,U.jsx)(f.A,{}),variant:"outlined",sx:{width:{xs:"100%",sm:"auto"}}})]}),(0,U.jsx)(r.JY,{onDragEnd:async e=>{if(!e.destination)return;const{source:a,destination:s}=e,t={...G};if(a.droppableId===s.droppableId){const e=t[a.droppableId],r=Array.from(e.tasks),[l]=r.splice(a.index,1);r.splice(s.index,0,l),t[a.droppableId]={...e,tasks:r}}else{const e=t[a.droppableId],r=t[s.droppableId],l=Array.from(e.tasks),n=Array.from(r.tasks),[i]=l.splice(a.index,1);n.splice(s.index,0,i),t[a.droppableId]={...e,tasks:l},t[s.droppableId]={...r,tasks:n}}H(t);try{await D({sourceColumn:a.droppableId,destColumn:s.droppableId,sourceIndex:a.index,destIndex:s.index},E.id),M(!K)}catch(V){console.log(V)}},children:(0,U.jsx)(n.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(3, 1fr)"},gap:2,width:"100%"},children:Object.entries(G).map((e=>{let[a,s]=e;return(0,U.jsx)(n.A,{children:(0,U.jsx)(d.A,{sx:{backgroundColor:"#f0efed",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",height:"100%"},children:(0,U.jsxs)(c.A,{children:[(0,U.jsxs)(i.A,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:[s.title," (",s.tasks.length,")"]}),(0,U.jsx)(r.gL,{droppableId:a,children:e=>(0,U.jsxs)(n.A,{ref:e.innerRef,...e.droppableProps,sx:{minHeight:100},children:[s.tasks.map(((e,a)=>(0,U.jsx)(r.sx,{draggableId:e._id,index:a,children:a=>(0,U.jsx)(d.A,{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,sx:{mb:2,backgroundColor:"white","&:hover":{boxShadow:"0 2px 4px rgba(0,0,0,0.15)"}},children:(0,U.jsx)(c.A,{children:(0,U.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,U.jsxs)(n.A,{sx:{flexGrow:1},children:[(0,U.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:["Task ID: ",e._id]}),(0,U.jsx)(i.A,{variant:"subtitle1",sx:{mt:1},children:e.taskSummary})]}),(0,U.jsx)(x.A,{onClick:a=>((e,a)=>{ie(e.currentTarget),le(a)})(a,e),size:"small",children:(0,U.jsx)(y.A,{})})]})})})},e._id))),e.placeholder]})})]})})},a)}))})}),(0,U.jsx)(z,{open:Q,onClose:pe,title:"Create New Task",children:(0,U.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),F(""),!Y.taskSummary)return void S.m.error("Task Summary is a required field");let a=Y.status||"todo";try{L(!0),delete Y._id,await T({...Y,status:a},E.id),S.m.success("New task created"),M(!K),pe()}catch(V){var s,t,r,l;S.m.error((null===(s=V.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Unable to create task"),F((null===(r=V.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||"Unable to create task")}finally{L(!1)}},children:[(0,U.jsx)(o.A,{margin:"normal",required:!0,fullWidth:!0,label:"Task Summary",name:"taskSummary",value:Y.taskSummary,onChange:ue,sx:{mb:2}}),(0,U.jsx)(o.A,{margin:"normal",fullWidth:!0,label:"Acceptance Criteria",name:"acceptanceCriteria",value:Y.acceptanceCriteria,onChange:ue,multiline:!0,rows:4,sx:{mb:2}}),(0,U.jsxs)(u.A,{fullWidth:!0,sx:{mb:3},children:[(0,U.jsx)(h.A,{children:"Status"}),(0,U.jsxs)(p.A,{name:"status",value:Y.status,label:"Status",onChange:ue,children:[(0,U.jsx)(m.A,{value:"todo",children:"To Do"}),(0,U.jsx)(m.A,{value:"inProgress",children:"In Progress"}),(0,U.jsx)(m.A,{value:"done",children:"Done"})]})]}),(0,U.jsxs)(n.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,U.jsx)(C.A,{label:"Cancel",onClick:pe,variant:"outlined"}),(0,U.jsx)(C.A,{label:"Create Task",type:"submit",loading:J})]})]})}),(0,U.jsx)(z,{open:ee,onClose:me,title:"Update Task",children:(0,U.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),F(""),Y.taskSummary)try{L(!0),await P(Y._id,Y.status,Y,E.id),S.m.success("Task Updated"),M(!K),me()}catch(V){var a,s,t,r;S.m.error((null===(a=V.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Unable to update task"),F((null===(t=V.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Unable to update task")}finally{L(!1)}else S.m.error("Task Summary is a required field")},children:[(0,U.jsx)(o.A,{margin:"normal",fullWidth:!0,label:"Task ID",value:Y._id||"",disabled:!0,sx:{mb:2}}),(0,U.jsx)(o.A,{margin:"normal",required:!0,fullWidth:!0,label:"Task Summary",name:"taskSummary",value:Y.taskSummary||"",onChange:ue,sx:{mb:2}}),(0,U.jsx)(o.A,{margin:"normal",fullWidth:!0,label:"Acceptance Criteria",name:"acceptanceCriteria",value:Y.acceptanceCriteria||"",onChange:ue,multiline:!0,rows:4,sx:{mb:2}}),(0,U.jsxs)(u.A,{fullWidth:!0,sx:{mb:3},children:[(0,U.jsx)(h.A,{children:"Status"}),(0,U.jsxs)(p.A,{name:"status",value:Y.status||"",label:"Status",onChange:ue,children:[(0,U.jsx)(m.A,{value:"todo",children:"To Do"}),(0,U.jsx)(m.A,{value:"inProgress",children:"In Progress"}),(0,U.jsx)(m.A,{value:"done",children:"Done"})]})]}),(0,U.jsxs)(n.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,U.jsx)(C.A,{label:"Cancel",onClick:me,variant:"outlined"}),(0,U.jsx)(C.A,{label:"Update Task",type:"submit",loading:J})]})]})}),(0,U.jsxs)(b.A,{anchorEl:ne,open:Boolean(ne),onClose:he,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,U.jsx)(m.A,{onClick:()=>(Z(re),ae(!0),void he()),children:"View/Update"}),(0,U.jsx)(m.A,{onClick:()=>{te(!0)},sx:{color:"error.main"},children:"Delete"})]}),(0,U.jsxs)(j.A,{open:se,onClose:()=>te(!1),PaperProps:{sx:{width:"100%",maxWidth:"400px",borderRadius:2}},children:[(0,U.jsx)(A.A,{children:"Confirm Delete"}),(0,U.jsx)(v.A,{children:(0,U.jsxs)(i.A,{children:['You are deleting the task "',null===re||void 0===re?void 0:re.taskSummary,'". This action cannot be undone.']})}),(0,U.jsxs)(g.A,{sx:{p:2.5},children:[(0,U.jsx)(C.A,{label:"Cancel",onClick:()=>te(!1),variant:"outlined"}),(0,U.jsx)(C.A,{label:"Delete",onClick:async()=>{try{await _(re._id,re.status,E.id),M(!K),te(!1)}catch(V){console.log(V),S.m.error("Unable to delete the task at this time")}finally{he()}},color:"error"})]})]})]})}}}]);
//# sourceMappingURL=969.bf0caea6.chunk.js.map